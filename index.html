<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Was / Were & There Was / Were ‚Äì Mastery</title>

<style>
:root{
  --blue:#2563eb;
  --green:#22c55e;
  --coral:#fb7185;
  --yellow:#fde047;
  --light:#f8fafc;
  --dark:#0f172a;
  --gray:#64748b;
  --white:#ffffff;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:'Nunito',system-ui;
  background:var(--light);
  color:var(--dark);
  font-size:20px;
}

.app{
  max-width:1100px;
  margin:auto;
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.header{
  background:var(--blue);
  color:white;
  padding:22px;
  border-radius:18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:16px;
}

.title{font-size:2rem;font-weight:900}
.subtitle{font-size:1.2rem;opacity:.9}

.controls-top{
  display:flex;
  gap:10px;
  align-items:center;
}

input{
  padding:10px 14px;
  border-radius:12px;
  border:none;
  font-size:1.1rem;
  font-weight:800;
}

button{
  padding:10px 16px;
  border-radius:12px;
  border:none;
  font-size:1.1rem;
  font-weight:900;
  cursor:pointer;
}

button.blue{background:var(--blue);color:white}
button.green{background:var(--green);color:white}
button.coral{background:var(--coral);color:white}
button.yellow{background:var(--yellow);color:var(--dark)}
button.gray{background:#e5e7eb}

.stats{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:14px;
}

.stat{
  background:var(--white);
  padding:16px;
  border-radius:16px;
  text-align:center;
  font-weight:900;
}

.stat small{display:block;color:var(--gray);font-weight:700}

.game{
  background:#dbeafe;
  border-radius:22px;
  padding:26px;
  display:flex;
  flex-direction:column;
  gap:22px;
}

.sentence{
  background:var(--white);
  border:5px solid var(--yellow);
  border-radius:22px;
  padding:26px;
  font-size:1.8rem;
  font-weight:900;
  text-align:center;
}

.choices{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}

.choice{
  padding:22px;
  border-radius:18px;
  font-size:1.3rem;
  font-weight:900;
  color:white;
  text-align:center;
}

.choice.be{background:var(--green)}
.choice.tw{background:var(--coral)}

.feedback{
  text-align:center;
  font-size:1.6rem;
  font-weight:900;
}
.ok{color:var(--green)}
.no{color:var(--coral)}

.leaderboard{
  background:var(--white);
  border-radius:22px;
  padding:22px;
}

.hidden{display:none}
</style>
</head>

<body>

<div class="app">

<div class="header">
  <div>
    <div class="title">Was / Were & There Was / Were</div>
    <div class="subtitle">A2 ¬∑ Burlington Unit 3 ¬∑ Grammar Game</div>
  </div>
  <div class="controls-top">
    <input id="nameInput" placeholder="Name">
    <button class="gray" onclick="toggleMusic()">üéµ</button>
    <button class="yellow" onclick="toggleLevel()" id="levelBtn">Easy</button>
    <button class="blue" onclick="openTeacher()">Teacher</button>
  </div>
</div>

<div class="stats">
  <div class="stat"><small>Streak</small><span id="streak">0</span></div>
  <div class="stat"><small>Mistakes</small><span id="mistakes">0</span></div>
  <div class="stat"><small>Best</small><span id="best">0</span></div>
  <div class="stat"><small>Time</small><span id="time">00:00</span></div>
  <div class="stat"><small>Level</small><span id="levelShow">Easy</span></div>
</div>

<div class="game">
  <div class="sentence" id="sentence"></div>
  <div class="choices">
    <div class="choice be" onclick="answer('be')">Was / Were</div>
    <div class="choice tw" onclick="answer('tw')">There was / There were</div>
  </div>
  <div class="feedback" id="feedback"></div>
</div>

<div class="leaderboard">
  <h3>üèÜ Leaderboard</h3>
  <ol id="ranking"></ol>
</div>

</div>

<!-- AUDIO -->
<audio id="bgm" loop src="audio/koala3.mp3"></audio>
<audio id="winSound" src="audio/tadaa.mp3"></audio>

<script>
/* ================= CONFIG ================= */
const GOAL=25;
const TEACHER_PIN="1234";

/* ================= AUDIO ================= */
const bgm=document.getElementById("bgm");
const winSound=document.getElementById("winSound");
let musicOn=false;

/* ================= STATE ================= */
let streak=0,best=0,mistakes=0,start=Date.now(),timer=null;
let level="easy";
let current=null;

/* ================= BANK ================= */
const BANK=[
/* WAS / WERE (45) */
...[
"I was tired yesterday.","She was at home last night.","They were late to school.","We were happy.","He was nervous.",
"I wasn't ready.","She wasn't at the party.","They weren't in class.","We weren't interested.","He wasn't angry.",
"Were you tired yesterday?","Was she at home last night?","Were they late?","Were we ready?","Was he nervous?"
].flatMap(t=>[{t,f:"be"}]),

/* THERE WAS / WERE (45) */
...[
"There was a test last Friday.","There were many students.","There was a problem.","There were two exams.","There was a teacher.",
"There wasn't any homework.","There weren't many people.","There wasn't a bus.","There weren't enough chairs.","There wasn't a test.",
"Was there a test?","Were there many students?","Was there a problem?","Were there two exams?","Was there a teacher?"
].flatMap(t=>[{t,f:"tw"}])
];

/* ================= LOGIC ================= */
const $=id=>document.getElementById(id);

function toggleMusic(){
  bgm.volume=.25;
  musicOn?bgm.pause():bgm.play().catch(()=>{});
  musicOn=!musicOn;
}

function toggleLevel(){
  level=level==="easy"?"hard":"easy";
  $("levelBtn").textContent=level==="easy"?"Easy":"Hard";
  $("levelShow").textContent=level;
}

function next(){
  const pool = level==="easy"
    ? BANK.filter(x=>!x.t.includes("?"))
    : BANK;
  current = pool[Math.floor(Math.random()*pool.length)];
  $("sentence").textContent=current.t;
  $("feedback").textContent="";
}

function answer(a){
  if(a===current.f){
    streak++; best=Math.max(best,streak);
    $("feedback").textContent="Correct!";
    $("feedback").className="feedback ok";
  }else{
    streak=0; mistakes++;
    $("feedback").textContent="Wrong!";
    $("feedback").className="feedback no";
  }
  $("streak").textContent=streak;
  $("mistakes").textContent=mistakes;
  $("best").textContent=best;

  if(best>=GOAL) win();
  else setTimeout(next,800);
}

function win(){
  winSound.play().catch(()=>{});
  bgm.pause();
}

function updateTime(){
  const s=Math.floor((Date.now()-start)/1000);
  $("time").textContent=
    String(Math.floor(s/60)).padStart(2,"0")+":"+
    String(s%60).padStart(2,"0");
}

function openTeacher(){
  const pin=prompt("Teacher PIN:");
  if(pin!==TEACHER_PIN) return;
  alert("Teacher mode enabled\n\n- Reset leaderboard\n- Stop music\n- Reset game");
  streak=mistakes=best=0;
}

setInterval(updateTime,1000);
next();
</script>

</body>
</html>
