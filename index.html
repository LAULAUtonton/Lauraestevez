<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Was / Were & There Be â€“ Mastery</title>

<style>
:root{
  --blue:#2563eb;
  --green:#22c55e;
  --coral:#fb7185;
  --yellow:#fde047;
  --light:#f8fafc;
  --dark:#0f172a;
  --gray:#64748b;
  --white:#ffffff;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:'Nunito',system-ui;
  background:var(--light);
  color:var(--dark);
  font-size:20px;
}

.app{
  max-width:1100px;
  margin:auto;
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.header{
  background:var(--blue);
  color:white;
  padding:22px;
  border-radius:18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.title{font-size:2rem;font-weight:900}
.subtitle{font-size:1.2rem;opacity:.9}

.controls-top{
  display:flex;
  gap:10px;
  align-items:center;
}

input{
  padding:10px 14px;
  border-radius:12px;
  border:none;
  font-size:1.1rem;
  font-weight:800;
}

button{
  padding:10px 16px;
  border-radius:12px;
  border:none;
  font-size:1.1rem;
  font-weight:900;
  cursor:pointer;
}

button.blue{background:var(--blue);color:white}
button.green{background:var(--green);color:white}
button.coral{background:var(--coral);color:white}
button.yellow{background:var(--yellow);color:var(--dark)}
button.gray{background:#e5e7eb}

.stats{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:14px;
}

.stat{
  background:var(--white);
  padding:16px;
  border-radius:16px;
  text-align:center;
  font-weight:900;
}

.stat small{display:block;color:var(--gray)}

.game{
  background:#dbeafe;
  border-radius:22px;
  padding:26px;
  display:flex;
  flex-direction:column;
  gap:22px;
}

.sentence{
  background:var(--white);
  border:5px solid var(--yellow);
  border-radius:22px;
  padding:28px;
  font-size:1.8rem;
  font-weight:900;
  text-align:center;
}

.choices{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:16px;
}

.choice{
  padding:22px;
  border-radius:18px;
  font-size:1.3rem;
  font-weight:900;
  color:white;
  text-align:center;
  cursor:pointer;
}

.choice.be{background:var(--green)}
.choice.tw{background:var(--coral)}

.feedback{
  text-align:center;
  font-size:1.6rem;
  font-weight:900;
}

.ok{color:var(--green)}
.no{color:var(--coral)}
</style>
</head>

<body>

<div class="app">

<div class="header">
  <div>
    <div class="title">Was / Were & There Be</div>
    <div class="subtitle">A2 Â· Grammar Game</div>
  </div>
  <div class="controls-top">
    <input id="nameInput" placeholder="Name">
    <button class="gray" onclick="toggleMusic()">ðŸŽµ</button>
    <button class="yellow" onclick="toggleLevel()" id="levelBtn">Easy</button>
  </div>
</div>

<div class="stats">
  <div class="stat"><small>Streak</small><span id="streak">0</span></div>
  <div class="stat"><small>Mistakes</small><span id="mistakes">0</span></div>
  <div class="stat"><small>Best</small><span id="best">0</span></div>
  <div class="stat"><small>Time</small><span id="time">00:00</span></div>
  <div class="stat"><small>Level</small><span id="levelShow">Easy</span></div>
</div>

<div class="game">
  <div class="sentence" id="sentence"></div>
  <div class="choices" id="choices"></div>
  <div class="feedback" id="feedback"></div>
</div>

</div>

<audio id="bgm" loop src="audio/koala3.mp3"></audio>
<audio id="winSound" src="audio/tadaa.mp3"></audio>

<script>
/* ================= AUDIO ================= */
const bgm=document.getElementById("bgm");
const winSound=document.getElementById("winSound");
let musicOn=false;

/* ================= STATE ================= */
let streak=0,best=0,mistakes=0,start=Date.now();
let level="easy";
let current=null;

/* ================= BANK ================= */
const BANK = [
  { t:"Yesterday, ____ a test at school.", a:"there was", lvl:"easy" },
  { t:"Last night, ____ two exams.", a:"there were", lvl:"easy" },
  { t:"Right now, ____ two teachers in the room.", a:"there are", lvl:"easy" },
  { t:"At the moment, ____ a bus outside.", a:"there is", lvl:"easy" },
  { t:"I ____ very tired yesterday.", a:"was", lvl:"easy" },
  { t:"They ____ late to school.", a:"were", lvl:"easy" },

  { t:"Yesterday, ____ any homework.", a:"there wasn't", lvl:"hard" },
  { t:"Last week, ____ enough chairs.", a:"there weren't", lvl:"hard" },
  { t:"____ there a test yesterday?", a:"Was", lvl:"hard" },
  { t:"____ there many students in class?", a:"Were", lvl:"hard" },
  { t:"I ____ ready for the exam.", a:"wasn't", lvl:"hard" },
  { t:"We ____ interested in the film.", a:"weren't", lvl:"hard" }
];

const ALL_CHOICES = [
  "there is","there are","there was","there were",
  "there isn't","there aren't","there wasn't","there weren't",
  "was","were","wasn't","weren't","Was","Were"
];

/* ================= LOGIC ================= */
function toggleMusic(){
  bgm.volume=.25;
  musicOn?bgm.pause():bgm.play().catch(()=>{});
  musicOn=!musicOn;
}

function toggleLevel(){
  level=level==="easy"?"hard":"easy";
  document.getElementById("levelBtn").textContent =
    level==="easy"?"Easy":"Hard";
  document.getElementById("levelShow").textContent =
    level.charAt(0).toUpperCase()+level.slice(1);
}

function next(){
  const pool = BANK.filter(q => q.lvl === level);
  current = pool[Math.floor(Math.random()*pool.length)];
  document.getElementById("sentence").textContent = current.t;
  document.getElementById("feedback").textContent = "";

  const options = shuffle([
    current.a,
    ...shuffle(ALL_CHOICES.filter(x=>x!==current.a)).slice(0,2)
  ]);

  const box = document.getElementById("choices");
  box.innerHTML="";

  options.forEach(o=>{
    const b=document.createElement("div");
    b.className="choice be";
    b.textContent=o;
    b.onclick=()=>answer(o);
    box.appendChild(b);
  });
}

function answer(choice){
  if(choice===current.a){
    streak++; best=Math.max(best,streak);
    document.getElementById("feedback").textContent="Correct!";
    document.getElementById("feedback").className="feedback ok";
  }else{
    streak=0; mistakes++;
    document.getElementById("feedback").textContent="Wrong!";
    document.getElementById("feedback").className="feedback no";
  }

  document.getElementById("streak").textContent=streak;
  document.getElementById("mistakes").textContent=mistakes;
  document.getElementById("best").textContent=best;

  setTimeout(next,800);
}

function updateTime(){
  const s=Math.floor((Date.now()-start)/1000);
  document.getElementById("time").textContent=
    String(Math.floor(s/60)).padStart(2,"0")+":"+
    String(s%60).padStart(2,"0");
}

function shuffle(a){
  return [...a].sort(()=>Math.random()-0.5);
}

setInterval(updateTime,1000);
next();
</script>

</body>
</html>
