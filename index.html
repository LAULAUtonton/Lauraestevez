<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Be & There Be â€“ Streak to 25</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
/* --- (TU CSS ORIGINAL, SIN CAMBIOS) --- */
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:"Poppins",sans-serif;
  background:linear-gradient(135deg,#eef2ff,#fef9c3);
}
.hidden{display:none}
/* (el resto de tu CSS sigue igual) */
</style>
</head>

<body>

<!-- START SCREEN -->
<div class="screen" id="startScreen">
  <div class="start-card">
    <div class="start-title">Be & There Be</div>
    <div class="subtitle">Streak to 25 â€“ no mistakes</div>

    <input id="playerName" placeholder="Write your name here">
    <button id="startBtn">ğŸš€ Start game</button>
  </div>
</div>

<!-- GAME SCREEN -->
<div class="screen hidden" id="gameScreen">
  <div class="game">
    <div id="playerLabel"></div>
    <div id="sentence"></div>
    <div id="activityLabel"></div>
    <div id="modeInstructions"></div>

    <div id="choices"></div>
    <div id="wordbank"></div>
    <div id="answer"></div>

    <button id="checkBtn">Check</button>
    <button id="undoBtn">Undo</button>

    <div id="feedback"></div>

    <div>
      Streak: <span id="streak">0</span>/25 |
      Mistakes: <span id="mistakes">0</span>
    </div>

    <div style="background:#ddd;height:10px;">
      <div id="progressBar" style="height:10px;width:0%;background:green;"></div>
    </div>

    <button id="pauseBtn">â¸</button>
    <button id="resetBtn">ğŸ”</button>
  </div>
</div>

<script src="sentences.js"></script>

<script>
// --- DOM ---
const startScreen = document.getElementById("startScreen");
const gameScreen = document.getElementById("gameScreen");
const startBtn = document.getElementById("startBtn");
const playerName = document.getElementById("playerName");
const playerLabel = document.getElementById("playerLabel");

const sentence = document.getElementById("sentence");
const activityLabel = document.getElementById("activityLabel");
const modeInstructions = document.getElementById("modeInstructions");
const choices = document.getElementById("choices");
const wordbank = document.getElementById("wordbank");
const answer = document.getElementById("answer");
const checkBtn = document.getElementById("checkBtn");
const undoBtn = document.getElementById("undoBtn");
const feedback = document.getElementById("feedback");

const streakSpan = document.getElementById("streak");
const mistakesSpan = document.getElementById("mistakes");
const progressBar = document.getElementById("progressBar");

const pauseBtn = document.getElementById("pauseBtn");
const resetBtn = document.getElementById("resetBtn");

// --- STATE ---
let streak = 0;
let mistakes = 0;
let current;
let selectedWords = [];

const shuffle = a => [...a].sort(() => Math.random() - 0.5);

// --- START ---
startBtn.onclick = () => {
  if (!playerName.value.trim()) return;
  playerLabel.textContent = "ğŸ‘¤ " + playerName.value;
  startScreen.classList.add("hidden");
  gameScreen.classList.remove("hidden");
  next();
};

// --- GAME ---
function next(){
  if (!window.BANK || BANK.length === 0){
    alert("Sentence bank not loaded");
    return;
  }

  current = shuffle(BANK)[0];
  sentence.textContent = current.t;
  activityLabel.textContent = current.type.toUpperCase();

  choices.innerHTML = "";
  wordbank.innerHTML = "";
  answer.textContent = "";
  selectedWords = [];

  if(current.type === "choose"){
    current.opts.forEach(o=>{
      const b = document.createElement("button");
      b.textContent = o;
      b.onclick = ()=>check(o);
      choices.appendChild(b);
    });
  } else {
    shuffle(current.a.split(" ")).forEach(w=>{
      const s = document.createElement("span");
      s.textContent = w;
      s.onclick = ()=>{
        selectedWords.push(w);
        answer.textContent = selectedWords.join(" ");
      };
      wordbank.appendChild(s);
    });
  }
}

// --- CHECK ---
function check(v){
  if(v === current.a){
    streak++;
    feedback.textContent = "âœ” Correct!";
  } else {
    streak = 0;
    mistakes++;
    feedback.textContent = "âœ˜ " + current.a;
  }
  streakSpan.textContent = streak;
  mistakesSpan.textContent = mistakes;
  progressBar.style.width = (streak/25*100)+"%";
  setTimeout(next,1000);
}

resetBtn.onclick = () => {
  streak = 0;
  mistakes = 0;
  next();
};
</script>

</body>
</html>
