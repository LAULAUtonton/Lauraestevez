<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>There Be â€“ Grammar Practice</title>

<style>
:root{
  --green:#22c55e;
  --blue:#0ea5e9;
  --purple:#7c3aed;
  --yellow:#facc15;
  --orange:#fb923c;
  --bg:#f0fdf4;
  --card:#ffffff;
  --text:#0f172a;
  --used:#e5e7eb;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,#dcfce7,#fef9c3);
  color:var(--text);
}
.hidden{display:none}
.screen{
  min-height:100svh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}

/* START */
.start{
  background:var(--card);
  padding:32px;
  border-radius:24px;
  max-width:520px;
  width:100%;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.start h1{text-align:center;color:var(--purple)}
.start input{
  padding:14px;
  border-radius:14px;
  border:3px solid var(--purple);
  font-weight:800;
}
.start button{
  padding:16px;
  border-radius:16px;
  border:none;
  background:var(--purple);
  color:white;
  font-weight:900;
  cursor:pointer;
}

/* GAME */
.app{
  max-width:1000px;
  width:100%;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.header{
  background:var(--purple);
  color:white;
  padding:16px;
  border-radius:18px;
  display:flex;
  justify-content:space-between;
  font-weight:900;
}
.progress{
  background:#e5e7eb;
  border-radius:14px;
  overflow:hidden;
}
.progress div{
  height:22px;
  background:linear-gradient(90deg,var(--green),#16a34a);
  width:0%;
  color:white;
  font-weight:900;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card{
  background:var(--card);
  padding:24px;
  border-radius:24px;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.sentence{
  border:4px solid var(--yellow);
  border-radius:18px;
  padding:20px;
  font-size:1.6rem;
  font-weight:900;
  text-align:center;
}
.mode{
  align-self:center;
  padding:6px 18px;
  border-radius:999px;
  color:white;
  font-weight:900;
}
.choose{background:var(--green)}
.order{background:var(--blue)}

.choices{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:14px;
}
.choice{
  padding:18px;
  border-radius:16px;
  font-weight:900;
  color:white;
  text-align:center;
  cursor:pointer;
}
.c1{background:var(--green)}
.c2{background:var(--purple)}
.c3{background:#ec4899}
.c4{background:var(--yellow);color:black}

.wordbank{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  justify-content:center;
}
.word{
  padding:14px 20px;
  border-radius:999px;
  background:#e0f2fe;
  border:3px solid #7dd3fc;
  font-weight:900;
  cursor:pointer;
}
.word.used{
  background:var(--used);
  border:3px dashed #cbd5f5;
  color:#94a3b8;
  cursor:not-allowed;
}
.answer{
  min-height:60px;
  border:4px dashed var(--blue);
  border-radius:16px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
}
.actions{
  display:flex;
  gap:16px;
  justify-content:center;
}
.actions button{
  padding:16px 26px;
  border-radius:18px;
  border:none;
  font-weight:900;
  cursor:pointer;
}
.check{background:var(--green);color:white}
.reset{background:var(--orange);color:white}
.feedback{
  text-align:center;
  font-weight:900;
  font-size:1.3rem;
}
.ok{color:#166534}
.no{color:#991b1b}
</style>
</head>

<body>

<!-- START -->
<div class="screen" id="startScreen">
  <div class="start">
    <h1>There Be â€“ Grammar</h1>
    <p>25 correct answers in a row</p>
    <input id="nameInput" placeholder="Student name">
    <button id="startBtn">START</button>
  </div>
</div>

<!-- GAME -->
<div class="screen hidden" id="gameScreen">
  <div class="app">
    <div class="header">
      <div id="playerLabel"></div>
      <div>Streak: <span id="streak">0</span>/25</div>
    </div>
    <div class="progress">
      <div id="bar">0 / 25</div>
    </div>
    <div class="card">
      <div class="sentence" id="sentence"></div>
      <div class="mode" id="mode"></div>

      <div class="choices hidden" id="choices"></div>
      <div class="wordbank hidden" id="wordbank"></div>
      <div class="answer hidden" id="answer"></div>

      <div class="actions hidden" id="actions">
        <button class="check" id="checkBtn">CHECK</button>
        <button class="reset" id="resetBtn">RESET</button>
      </div>

      <div class="feedback" id="feedback"></div>
    </div>
  </div>
</div>

<script>
/* DOM */
const $=id=>document.getElementById(id);

const startBtn=$("startBtn");
const nameInput=$("nameInput");
const startScreen=$("startScreen");
const gameScreen=$("gameScreen");
const playerLabel=$("playerLabel");
const sentenceBox=$("sentence");
const modeBox=$("mode");
const choicesBox=$("choices");
const wordbankBox=$("wordbank");
const answerBox=$("answer");
const actionsBox=$("actions");
const feedbackBox=$("feedback");
const bar=$("bar");
const streakSpan=$("streak");
const checkBtn=$("checkBtn");
const resetBtn=$("resetBtn");

/* STATE */
let streak=0;
let current=null;

/* BANK (300+) */
const places=["classroom","hall","school","park","office","kitchen","garden","library","bathroom","playground"];
const nouns=["students","chairs","tables","books","windows","doors","computers","bags","teachers","children"];
const wh=["how many","where","when","why"];

const BANK=[];
places.forEach(p=>{
  nouns.forEach(n=>{
    BANK.push({type:"choose",t:`____ ${n} in the ${p}.`,a:"there are",
      opts:["there is","there are","there was","there were"]});
    BANK.push({type:"choose",t:`Yesterday, ____ ${n} in the ${p}.`,a:"there were",
      opts:["there was","there were","there is","there are"]});
    BANK.push({type:"order",t:"Order the sentence:",a:`there are ${n} in the ${p}`});
    BANK.push({type:"order",t:"Order the question:",a:`were there ${n} in the ${p}`});
  });
});
wh.forEach(w=>{
  places.forEach(p=>{
    BANK.push({type:"order",t:"Order the WH-question:",a:`${w} students were there in the ${p}`});
  });
});

const shuffle=a=>[...a].sort(()=>Math.random()-.5);

/* EVENTS */
startBtn.addEventListener("click",()=>{
  if(!nameInput.value.trim())return;
  playerLabel.textContent="ðŸ‘¤ "+nameInput.value;
  startScreen.classList.add("hidden");
  gameScreen.classList.remove("hidden");
  next();
});

checkBtn.addEventListener("click",()=>check(answerBox.textContent));
resetBtn.addEventListener("click",()=>renderOrder());

/* FLOW */
function next(){
  current=BANK[Math.floor(Math.random()*BANK.length)];
  sentenceBox.textContent=current.t;
  feedbackBox.textContent="";
  updateProgress();
  current.type==="choose"?renderChoose():renderOrder();
}

function renderChoose(){
  modeBox.textContent="CHOOSE";
  modeBox.className="mode choose";
  choicesBox.innerHTML="";
  choicesBox.classList.remove("hidden");
  wordbankBox.classList.add("hidden");
  answerBox.classList.add("hidden");
  actionsBox.classList.add("hidden");

  shuffle(current.opts).forEach((o,i)=>{
    const d=document.createElement("div");
    d.className="choice c"+(i+1);
    d.textContent=o;
    d.onclick=()=>check(o);
    choicesBox.appendChild(d);
  });
}

function renderOrder(){
  modeBox.textContent="ORDER";
  modeBox.className="mode order";
  choicesBox.classList.add("hidden");
  wordbankBox.classList.remove("hidden");
  answerBox.classList.remove("hidden");
  actionsBox.classList.remove("hidden");
  wordbankBox.innerHTML="";
  answerBox.textContent="";

  shuffle(current.a.split(" ")).forEach(w=>{
    const d=document.createElement("div");
    d.className="word";
    d.textContent=w;
    d.onclick=()=>{
      if(d.classList.contains("used"))return;
      d.classList.add("used");
      answerBox.textContent+=(answerBox.textContent?" ":"")+w;
    };
    wordbankBox.appendChild(d);
  });
}

function check(val){
  const ok=val===current.a;
  feedbackBox.textContent=ok?"âœ” Correct!":"âœ˜ Try again";
  feedbackBox.className="feedback "+(ok?"ok":"no");
  streak=ok?streak+1:0;
  updateProgress();
  if(ok)setTimeout(next,800);
}

function updateProgress(){
  streakSpan.textContent=streak;
  bar.style.width=(streak/25*100)+"%";
  bar.textContent=streak+" / 25";
}
</script>

</body>
</html>
