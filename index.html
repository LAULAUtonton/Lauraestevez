<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Be Mastery â€“ A2</title>

<style>
:root{
  --blue:#2563eb;
  --green:#22c55e;
  --coral:#fb7185;
  --yellow:#fde047;
  --light:#f8fafc;
  --dark:#0f172a;
  --gray:#64748b;
  --white:#ffffff;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  font-family:'Nunito',system-ui;
  background:var(--light);
  color:var(--dark);
  font-size:20px;
}

.app{
  max-width:1100px;
  margin:auto;
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.header{
  background:var(--blue);
  color:white;
  padding:22px;
  border-radius:18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.title{font-size:2rem;font-weight:900}
.subtitle{font-size:1.2rem;opacity:.9}

.controls-top{
  display:flex;
  gap:10px;
  align-items:center;
}

button{
  padding:10px 16px;
  border-radius:12px;
  border:none;
  font-size:1.1rem;
  font-weight:900;
  cursor:pointer;
}

button.gray{background:#e5e7eb}
button.yellow{background:var(--yellow)}
button.blue{background:var(--blue);color:white}

.stats{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:14px;
}

.stat{
  background:var(--white);
  padding:16px;
  border-radius:16px;
  text-align:center;
  font-weight:900;
}

.stat small{display:block;color:var(--gray)}

.game{
  background:#dbeafe;
  border-radius:22px;
  padding:26px;
  display:flex;
  flex-direction:column;
  gap:22px;
}

.sentence{
  background:var(--white);
  border:5px solid var(--yellow);
  border-radius:22px;
  padding:28px;
  font-size:1.8rem;
  font-weight:900;
  text-align:center;
}

.choices{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:16px;
}

.choice{
  padding:20px;
  border-radius:18px;
  font-size:1.4rem;
  font-weight:900;
  color:white;
  text-align:center;
  cursor:pointer;
}

.choice.green{background:var(--green)}
.choice.coral{background:var(--coral)}
.choice.blue{background:var(--blue)}

.feedback{
  text-align:center;
  font-size:1.6rem;
  font-weight:900;
}

.ok{color:var(--green)}
.no{color:var(--coral)}
</style>
</head>

<body>

<div class="app">

<div class="header">
  <div>
    <div class="title">Be Mastery</div>
    <div class="subtitle">A2 Â· Was / Were Â· There was / were Â· Is / Are</div>
  </div>
  <div class="controls-top">
    <button class="gray" onclick="toggleMusic()">ðŸŽµ</button>
    <button class="yellow">Goal: 25</button>
  </div>
</div>

<div class="stats">
  <div class="stat"><small>Streak</small><span id="streak">0</span></div>
  <div class="stat"><small>Mistakes</small><span id="mistakes">0</span></div>
  <div class="stat"><small>Best</small><span id="best">0</span></div>
  <div class="stat"><small>Time</small><span id="time">00:00</span></div>
  <div class="stat"><small>Goal</small>25</div>
</div>

<div class="game">
  <div class="sentence" id="sentence"></div>
  <div class="choices" id="choices"></div>
  <div class="feedback" id="feedback"></div>
</div>

</div>

<audio id="bgm" loop src="audio/koala3.mp3"></audio>
<audio id="winSound" src="audio/tadaa.mp3"></audio>

<script>
const GOAL = 25;
const bgm = document.getElementById("bgm");
const winSound = document.getElementById("winSound");

let streak=0, best=0, mistakes=0;
let start = Date.now();
let current = null;
let musicOn = false;

const BANK = [
  { t:"I ____ tired yesterday.", a:"was" },
  { t:"She ____ at home last night.", a:"was" },
  { t:"They ____ late to school.", a:"were" },
  { t:"We ____ happy.", a:"were" },

  { t:"I ____ ready.", a:"wasn't" },
  { t:"They ____ in class.", a:"weren't" },

  { t:"____ there a test last Friday?", a:"Was" },
  { t:"____ there many students?", a:"Were" },

  { t:"There ____ a problem.", a:"was" },
  { t:"There ____ two exams.", a:"were" },

  { t:"There ____ any homework.", a:"wasn't" },
  { t:"There ____ many people.", a:"weren't" },

  { t:"Right now, there ____ two teachers here.", a:"are" },
  { t:"There ____ a bus now.", a:"is" }
];

const ALL_CHOICES = ["was","were","wasn't","weren't","is","are","Was","Were"];

function toggleMusic(){
  bgm.volume = 0.25;
  musicOn ? bgm.pause() : bgm.play().catch(()=>{});
  musicOn = !musicOn;
}

function next(){
  current = BANK[Math.floor(Math.random()*BANK.length)];
  document.getElementById("sentence").textContent = current.t;
  document.getElementById("feedback").textContent = "";

  const options = shuffle([
    current.a,
    ...shuffle(ALL_CHOICES.filter(x=>x!==current.a)).slice(0,2)
  ]);

  const box = document.getElementById("choices");
  box.innerHTML = "";
  options.forEach(o=>{
    const b = document.createElement("div");
    b.className = "choice green";
    b.textContent = o;
    b.onclick = ()=>answer(o);
    box.appendChild(b);
  });
}

function answer(choice){
  if(choice === current.a){
    streak++;
    best = Math.max(best, streak);
    document.getElementById("feedback").textContent = "Correct!";
    document.getElementById("feedback").className = "feedback ok";
  }else{
    streak = 0;
    mistakes++;
    document.getElementById("feedback").textContent = "Try again!";
    document.getElementById("feedback").className = "feedback no";
  }

  document.getElementById("streak").textContent = streak;
  document.getElementById("mistakes").textContent = mistakes;
  document.getElementById("best").textContent = best;

  if(best >= GOAL){
    winSound.play().catch(()=>{});
    bgm.pause();
  }else{
    setTimeout(next,800);
  }
}

function updateTime(){
  const s = Math.floor((Date.now()-start)/1000);
  document.getElementById("time").textContent =
    String(Math.floor(s/60)).padStart(2,"0")+":"+
    String(s%60).padStart(2,"0");
}

function shuffle(a){
  return [...a].sort(()=>Math.random()-0.5);
}

setInterval(updateTime,1000);
next();
</script>

</body>
</html>
